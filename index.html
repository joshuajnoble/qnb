<!doctype html>
<html>
<head>
  <title>Quartz</title>
  <!-- Load the platform first -->
  <script src="/bower_components/platform/platform.js"></script>
  <!-- imports -->
  <link rel="import" href="/imports.html">
  <style>
    html, body {
      height: 100%;
      width: 100%;
    }

    frog-deck {
      height: 100%;
      width: 100%;
    }
  </style>
</head>
<body unresolved>

  <frog-deck id="deck" transition="fade">

    <frog-card>
      <q-view url="/data/stories/story-2.json">
        <q-visualization full title="Multi-line Chart" hasContent>
          <q-chart-line url="/data/face_scans_day.json"></q-chart-line>
        </q-visualization>
      </q-view>
    </frog-card>

    <!-- <frog-card>
      <q-view url="/data/stories/story-2.json">
        <q-visualization full title="World Map of Awfulness" hasContent>
          <q-chart-globe url="/data/deforestation.json" dataTopLevel="Continent"></q-chart-globe>
        </q-visualization>
      </q-view>
    </frog-card> -->

  </frog-deck>

  <script>
    var timer;
    var deck = document.querySelector('#deck');
    var cards = deck.querySelectorAll('frog-card');

    // deck.addEventListener('change', function (e) {
    //   console.log(e.detail);
    //   var selected = e.detail.newVal;
    //   renderVisualizations(cards[selected]);
    // });

    document.addEventListener('click', next, false);

    // function renderVisualizations(card) {
    //   var visualizations = card.querySelectorAll('q-visualization > *');
    //   visualizations.array().forEach(function (v) {
    //     if (v.update) return v.update.call(v);
    //     if (v.draw) v.draw.call(v);
    //   });
    // }

    function next() {
      deck.selected = (deck.selected + 1) % deck.children.length;
    };

    function start() {
      timer = window.setInterval(next, 5000);
    };

    function stop() {
      window.clearInterval(timer);
    };

    function toggle() {
      if (!timer) {
        start();
      } else {
        stop();
      }
    };

    // initial render
    // window.addEventListener('WebComponentsReady', function(e) {
    //   renderVisualizations(cards[0]);
    // });

  </script>
  
</body>
</html>