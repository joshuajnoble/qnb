<link rel="import" href="/bower_components/polymer/polymer.html">
<script src="/bower_components/d3/d3.min.js"></script>

<polymer-element name="q-chart" attributes="url">
  <script>
    (function () {

      Polymer('q-chart', {
        url: null,
        data: null,
        chart: null,
        isRendered: false,
        ready: function () {
          this.onLoad = (function (err, res) {
            this.data = res;
            this.asyncFire('load', res);
          }).bind(this);
          this.draw();
        },
        urlChanged: function (oldVal, newVal) {
          d3.json(newVal, this.onLoad);
        },
        draw: function () {
          var chart = this.chart = d3.select(this.$.chart)
            .attr("class", "chart")
            .attr("width", this.clientWidth)
            .attr("height", this.clientHeight);
        },
        start: function () {
          console.log('do animation here in sub-class');
        },
        stop: function () {
          console.log('stop animation here in sub-class');
        },
        render: function () {
          console.log('this method should be overriden in the sub-class');
        }
      });

    })();
  </script>
</polymer-element>